<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E3CLIPSE3å¤§äººçš„æ¸¸æˆåˆé›†</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="poker-style.css">
    <link rel="stylesheet" href="poker-original.css">
</head>
<body>
    <!-- è§†é¢‘èƒŒæ™¯ -->
    <video id="backgroundVideo" autoplay muted loop playsinline>
        <source src="background_video.mp4" type="video/mp4">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾ã€‚
    </video>
    
    <!-- P3Ré£æ ¼åŠ è½½ç•Œé¢ -->
    <div id="openingAnimation" class="loading-screen">
        <div class="loading-background">
            <canvas id="particleCanvas" class="particle-canvas"></canvas>
            <div class="blue-fragments"></div>
            <div class="data-streams"></div>
        </div>
        
        <div class="loading-content">
            <div class="logo-container">
                <div class="persona-logo">
                    <div class="logo-line"></div>
                    <h1 class="logo-text">
                        <span class="persona">Persona</span>
                        <span class="three">3</span>
                        <span class="reload">Reload</span>
                    </h1>
                    <div class="logo-subtitle">æ¸¸æˆåˆé›†</div>
                </div>
            </div>
            
            <div class="loading-ui">
                <div class="scan-line"></div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                    <div class="loading-text">ç³»ç»Ÿåˆå§‹åŒ–ä¸­...</div>
                </div>
                <div class="system-info">
                    <div class="info-line">
                        <span class="label">çŠ¶æ€:</span>
                        <span class="value" id="statusText">å¯åŠ¨ä¸­...</span>
                    </div>
                    <div class="info-line">
                        <span class="label">è¿›åº¦:</span>
                        <span class="value" id="progressText">0%</span>
                    </div>
                </div>
            </div>
            
            <div class="skip-hint">
                <kbd>ç©ºæ ¼</kbd> è·³è¿‡
            </div>
        </div>
    </div>
    <!-- ä¸»å¯¼èˆªæ  -->
    <nav class="top-navbar">
        <div class="nav-left">
            <div class="logo">E3CLIPSE3</div>
            <div class="nav-links">
                <a href="#" class="nav-link active">æ¸¸æˆåˆé›†</a>
            </div>
        </div>
        <div class="nav-right">
            <div class="user-menu">
                <span class="user-name" data-text="ç©å®¶">ç©å®¶</span>
            </div>
        </div>
    </nav>
    
    <!-- å…¬å‘Šæ  -->
    <div class="announcement" id="gameAnnouncement">
        <button class="announcement-close" id="closeAnnouncement">Ã—</button>
        <h3>ğŸ® æ¸¸æˆå…¬å‘Š</h3>
        <p>æ¬¢è¿æ¥åˆ°E3CLIPSE3å¤§äººçš„æ¸¸æˆåˆé›†ï¼</p>
        <p>ç›®å‰åŒ…å«è´ªåƒè›‡ã€ä¿„ç½—æ–¯æ–¹å—å’Œé‡å­éª‘å£«ä¸‰æ¬¾æ¸¸æˆï¼Œæ›´å¤šç²¾å½©æ¸¸æˆæ•¬è¯·æœŸå¾…ï¼</p>
        <p>æç¤ºï¼šä½¿ç”¨å³ä¾§çƒ­é”®å¿«é€Ÿåˆ‡æ¢æ¸¸æˆï¼ŒæŒ‰ESCé”®å¯è¿”å›ä¸»èœå•ã€‚</p>
    </div>
    
    <!-- é¼ æ ‡åæ ‡è·Ÿéš -->
    <div class="mouse-coordinates" id="mouseCoords">0, 0</div>
    
    <!-- ä¸»èœå•ç•Œé¢ -->
    <div id="mainMenu" class="main-menu">
        <div class="content-wrapper">
            <div class="hero-section">
                <div class="hero-background"></div>
                <div class="hero-content">
                    <h1 class="main-title">E3CLIPSE3å¤§äººçš„æ¸¸æˆåˆé›†</h1>
                    <p class="main-subtitle">åœ¨æµè§ˆå™¨ä¸­ä½“éªŒä¼˜è´¨æ¸¸æˆ</p>
                </div>
            </div>
            
            <div class="games-section">
                <div class="section-header">
                    <h2>ç²¾é€‰æ¸¸æˆ</h2>
                    <div class="section-controls">
                        <button class="filter-btn active">å…¨éƒ¨</button>
                        <button class="filter-btn">åŠ¨ä½œ</button>
                        <button class="filter-btn">ç›Šæ™º</button>
                    </div>
                </div>
                
                <div class="poker-carousel-container">
                    <!-- æ‰‘å…‹ç‰Œè½®æ’­æ•ˆæœ -->
                    <div class="container">
                        <div class="poker poker1">
                            <img src="./original-project/photos/photo (4).webp" />
                        </div>
                        <div class="poker poker2">
                            <img src="./original-project/photos/photo (3).webp" />
                        </div>
                        <div class="poker poker3">
                            <img src="./original-project/photos/photo (2).webp" />
                        </div>
                        <div class="poker poker4">
                            <img src="./original-project/photos/photo (1).webp" />
                        </div>
                        <div class="poker poker5">
                            <img src="./original-project/photos/photo (0).webp" />
                        </div>
                        <div class="poker_top poker5" onclick="poker.move()">
                            <div class="game-icon">ğŸ®</div>
                            <div class="game-title">é€‰æ‹©æ¸¸æˆ</div>
                            <div class="game-description">ç‚¹å‡»åˆ‡æ¢æ¸¸æˆ</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="hotkeys">
                <kbd>1</kbd> è´ªåƒè›‡ â€¢ <kbd>2</kbd> ä¿„ç½—æ–¯æ–¹å— â€¢ <kbd>3</kbd> é‡å­éª‘å£« â€¢ <kbd>ESC</kbd> è¿”å›ä¸»èœå•
            </div>
        </div>
    </div>
    
    <!-- è´ªåƒè›‡æ¸¸æˆç•Œé¢ -->
    <div id="snakeGame" class="game-container" style="display: none;">
        <div class="game-header">
            <div class="game-title-row">
                <button id="backToMenuSnake" class="back-button">â† è¿”å›èœå•</button>
                <h1>ğŸ è´ªåƒè›‡æ¸¸æˆ</h1>
                <div class="spacer"></div>
            </div>
            <div class="score-board">
                <div class="score">
                    <span>åˆ†æ•°: </span>
                    <span id="snakeScore">0</span>
                </div>
                <div class="high-score">
                    <span>æœ€é«˜åˆ†: </span>
                    <span id="snakeHighScoreDisplay">0</span>
                </div>
            </div>
        </div>
        
        <div class="game-area">
            <canvas id="snakeCanvas" width="600" height="600"></canvas>
            <div class="game-overlay" id="snakeOverlay">
                <div class="game-message">
                    <h2 id="snakeMessage">æŒ‰ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆ</h2>
                    <p id="snakeSubMessage">ä½¿ç”¨ WASD æˆ–æ–¹å‘é”®æ§åˆ¶è›‡çš„ç§»åŠ¨</p>
                    <button id="snakeStartButton" class="game-button">å¼€å§‹æ¸¸æˆ</button>
                </div>
            </div>
        </div>
        
        <div class="game-controls">
            <div class="control-instructions">
                <h3>æ¸¸æˆæ§åˆ¶</h3>
                <div class="controls-grid">
                    <div class="control-item">
                        <kbd>W</kbd> <kbd>â†‘</kbd> å‘ä¸Š
                    </div>
                    <div class="control-item">
                        <kbd>S</kbd> <kbd>â†“</kbd> å‘ä¸‹
                    </div>
                    <div class="control-item">
                        <kbd>A</kbd> <kbd>â†</kbd> å‘å·¦
                    </div>
                    <div class="control-item">
                        <kbd>D</kbd> <kbd>â†’</kbd> å‘å³
                    </div>
                    <div class="control-item">
                        <kbd>Space</kbd> æš‚åœ/ç»§ç»­
                    </div>
                    <div class="control-item">
                        <kbd>R</kbd> é‡æ–°å¼€å§‹
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆç•Œé¢ -->
    <div id="tetrisGame" class="game-container" style="display: none;">
        <div class="game-header">
            <div class="game-title-row">
                <button id="backToMenuTetris" class="back-button">â† è¿”å›èœå•</button>
                <h1>ğŸ§© ä¿„ç½—æ–¯æ–¹å—</h1>
                <div class="spacer"></div>
            </div>
            <div class="score-board">
                <div class="score">
                    <span>åˆ†æ•°: </span>
                    <span id="tetrisScore">0</span>
                </div>
                <div class="high-score">
                    <span>ç­‰çº§: </span>
                    <span id="tetrisLevel">1</span>
                </div>
                <div class="score">
                    <span>è¡Œæ•°: </span>
                    <span id="tetrisLines">0</span>
                </div>
            </div>
        </div>
        
        <div class="tetris-game-area">
            <div class="tetris-side-panel">
                <div class="next-piece">
                    <h4>ä¸‹ä¸€ä¸ª</h4>
                    <canvas id="nextPieceCanvas" width="120" height="120"></canvas>
                </div>
                <div class="game-stats">
                    <div class="stat-item">
                        <span>æœ€é«˜åˆ†:</span>
                        <span id="tetrisHighScoreDisplay">0</span>
                    </div>
                </div>
            </div>
            
            <div class="tetris-main-area">
                <canvas id="tetrisCanvas" width="400" height="600"></canvas>
                <div class="game-overlay" id="tetrisOverlay">
                    <div class="game-message">
                        <h2 id="tetrisMessage">æŒ‰ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆ</h2>
                        <p id="tetrisSubMessage">ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶æ–¹å—ç§»åŠ¨å’Œæ—‹è½¬</p>
                        <button id="tetrisStartButton" class="game-button">å¼€å§‹æ¸¸æˆ</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="game-controls">
            <div class="control-instructions">
                <h3>æ¸¸æˆæ§åˆ¶</h3>
                <div class="controls-grid">
                    <div class="control-item">
                        <kbd>â†</kbd> å·¦ç§»
                    </div>
                    <div class="control-item">
                        <kbd>â†’</kbd> å³ç§»
                    </div>
                    <div class="control-item">
                        <kbd>â†“</kbd> å¿«é€Ÿä¸‹é™
                    </div>
                    <div class="control-item">
                        <kbd>â†‘</kbd> æ—‹è½¬
                    </div>
                    <div class="control-item">
                        <kbd>Space</kbd> ç¬é—´ä¸‹é™
                    </div>
                    <div class="control-item">
                        <kbd>P</kbd> æš‚åœ/ç»§ç»­
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- é‡å­éª‘å£«æ¸¸æˆç•Œé¢ -->
    <div id="adventureGame" class="game-container" style="display: none;">
        <div class="game-header">
            <div class="game-title-row">
                <button id="backToMenuAdventure" class="back-button">â† è¿”å›èœå•</button>
                <h1>âš”ï¸ é‡å­éª‘å£«</h1>
                <div class="spacer"></div>
            </div>
            <div class="adventure-hud">
                <div class="player-stats">
                    <div class="health-bar">
                        <div class="stat-label">HP</div>
                        <div class="bar-container">
                            <div class="bar health-fill" id="playerHealth"></div>
                        </div>
                        <div class="stat-value" id="healthText">100/100</div>
                    </div>
                    <div class="energy-bar">
                        <div class="stat-label">MP</div>
                        <div class="bar-container">
                            <div class="bar energy-fill" id="playerEnergy"></div>
                        </div>
                        <div class="stat-value" id="energyText">50/50</div>
                    </div>
                </div>
                <div class="game-info">
                    <div class="score-display">
                        <span>åˆ†æ•°: </span>
                        <span id="adventureScore">0</span>
                    </div>
                    <div class="level-display">
                        <span>å…³å¡: </span>
                        <span id="currentLevel">1</span>
                    </div>
                    <div class="lives-display">
                        <span>ç”Ÿå‘½: </span>
                        <span id="playerLives">3</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="adventure-game-area">
            <canvas id="adventureCanvas" width="1000" height="600"></canvas>
            <div class="game-overlay" id="adventureOverlay">
                <div class="game-message">
                    <h2 id="adventureMessage">é‡å­éª‘å£«</h2>
                    <p id="adventureSubMessage">ä½¿ç”¨ WASD ç§»åŠ¨ï¼ŒJ/K æ”»å‡»ï¼ŒL æ–½æ”¾æŠ€èƒ½</p>
                    <button id="adventureStartButton" class="game-button">å¼€å§‹å†’é™©</button>
                </div>
            </div>
        </div>
        
        <div class="game-controls">
            <div class="control-instructions">
                <h3>æ¸¸æˆæ§åˆ¶</h3>
                <div class="controls-grid">
                    <div class="control-item">
                        <kbd>W/A/S/D</kbd> ç§»åŠ¨
                    </div>
                    <div class="control-item">
                        <kbd>J</kbd> è½»æ”»å‡»
                    </div>
                    <div class="control-item">
                        <kbd>K</kbd> é‡æ”»å‡»
                    </div>
                    <div class="control-item">
                        <kbd>L</kbd> æŠ€èƒ½æ”»å‡»
                    </div>
                    <div class="control-item">
                        <kbd>Space</kbd> è·³è·ƒ
                    </div>
                    <div class="control-item">
                        <kbd>P</kbd> æš‚åœ
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="opening.js"></script>
    <script src="tetris.js"></script>
    <script src="knight.js"></script>
    <script src="game.js"></script>
    <script src="start.js"></script>
    
    <!-- æ‰‘å…‹ç‰Œè½®æ’­æ•ˆæœ -->
    <script src="poker-original.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ¸¸æˆç®¡ç†å™¨
            window.gameManager = new GameManager();
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¯­è¨€è®¾ç½®
            const savedLanguage = localStorage.getItem('gameLanguage') || 'en';
            window.gameManager.switchLanguage(savedLanguage);
            
            // å¤„ç†è§†é¢‘åŠ è½½é”™è¯¯
            const video = document.getElementById('backgroundVideo');
            if (video) {
                video.addEventListener('error', function(e) {
                    console.error('è§†é¢‘åŠ è½½å¤±è´¥:', e);
                    // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¤‡ç”¨èƒŒæ™¯æˆ–å…¶ä»–å¤„ç†
                });
                
                // å°è¯•åŠ è½½è§†é¢‘
                video.load();
            }
            
            // å…¬å‘Šå…³é—­åŠŸèƒ½
            const closeAnnouncementBtn = document.getElementById('closeAnnouncement');
            const announcement = document.getElementById('gameAnnouncement');
            
            if (closeAnnouncementBtn && announcement) {
                closeAnnouncementBtn.addEventListener('click', function() {
                    announcement.style.display = 'none';
                    // å­˜å‚¨ç”¨æˆ·å·²å…³é—­å…¬å‘Šçš„çŠ¶æ€
                    localStorage.setItem('announcementClosed', 'true');
                });
                
                // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å…³é—­å…¬å‘Š
                const announcementClosed = localStorage.getItem('announcementClosed');
                if (announcementClosed === 'true') {
                    announcement.style.display = 'none';
                }
            }
        });
    </script>
</body>
</html>